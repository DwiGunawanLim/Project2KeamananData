<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CipherText Project</title>
    <!-- Bootstrap 5 -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
</head>
<style>
    body {
          font-family: 'Helvetica', 'Arial', 'sans-serif'; 
        color: black;
        font-size: 11pt;		
    }

    a, a:link, a:visited, a:active {
        color: blue;
        text-decoration: underline;
    }

    a:hover {
        cursor:pointer;
        color: red;
    }

    .black10pointcourier {
          font-family: 'courier'; 
        color: black;
        font-size: 10pt;		
    }

    .container {
        width: 80%;
        margin: 0 auto;
    }

    .dropzone {
        border: 10px dashed gray;
        width: 20%;
        padding: 2% 2% 5% 2%;
        text-align: center;
        margin: 5px 0 5px 0;
    }

    .divTablefullwidth{
        display: table;
        width: 100%;
    }

    .divTable{
        display: table;
    }

    .divTableRow {
        display: table-row;
    }
    .divTableCell {
        display: table-cell;
        padding: 3px 3px;
    }
    .divTableBody {
        display: table-row-group;
    }

    .greenspan {
        color: green;	  
    }

    .redspan {
        color: red;	  
    }
</style>
<body>
    <div class=container>
		<div class="divTablefullwidth">
			<div class="divTableBody">
				<div class="divTableRow">
					<div class="divTableCell" style="float: left;">
						<h1>Web Browser Based File Encryption / Decryption</h1>
						<h4>Use your web browser to encrypt and decrypt files.</h4>
					</div>
					<div class="divTableCell" style="float: right;">
						<h1>
						<button id="btnRefresh" onClick="javascript:location.reload();">Refresh Page</button>
						<button id="btnDivEncrypt" onClick="javascript:switchdiv('encrypt');">Encrypt a File</button>
						<button id="btnDivDecrypt" onClick="javascript:switchdiv('decrypt');">Decrypt a File</button>
						</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
    <div class=container>
		<hr>
	</div>

	<div class="container" id=divEncryptfile>
		<h2>Encrypt a File</h2>
		<p>To encrypt a file, enter a password and drop the file to be encrypted into the dropzone below.  The file will then be encrypted using the password, then you'll be given an opportunity to save the encrypted file to your system.</p>

		<div class="divTable">
			<div class="divTableBody">
				<div class="divTableRow">
					<div class="divTableCell">Password</div>
					<div class="divTableCell"><input id=txtEncpassphrase type=password size=30 onkeyup=javascript:encvalidate(); value=''></div>
					<div class="divTableCell">(minumum length eight characters, make sure it strong!)</div>
				</div>
				<div class="divTableRow">
					<div class="divTableCell">Password (retype)</div>
					<div class="divTableCell"><input id=txtEncpassphraseretype type=password size=30 onkeyup=javascript:encvalidate(); value=''></div>
					<div class="divTableCell"><span class=greenspan id=spnCheckretype></span></div>
				</div>
			</div>
		</div>

		<p> </p>

		<div>
			<div class=dropzone id="encdropzone" ondrop="drop_handler(event);" ondragover="dragover_handler(event);" ondragend="dragend_handler(event);">
				<p>Drag and drop the file to be encrypted into this dropzone, or click <a onclick=javascript:encfileElem.click();>here</a> to select file.</p>
				<p><span id=spnencfilename></span></p>
			</div>
			<input type="file" id="encfileElem" style="display:none" onchange="selectfile(this.files)">
		</div>

		<p> </p>

		<div class="divTable">
			<div class="divTableBody">
				<div class="divTableRow">
					<div class="divTableCell"><button id=btnEncrypt onclick=javascript:encryptfile(); disabled>Encrypt File</button></div>
					<div class="divTableCell"><span id=spnEncstatus></span></div>
				</div>
			</div>
		</div>

		<p> </p>

		<div>
			<a id=aEncsavefile hidden><button>Save Encrypted File</button></a>
		</div>
	
		<p> </p>
	</div>

	<div class="container" id=divDecryptfile>
		<h2>Decrypt a File</h2>
		<p>Decrypt a file using the password that was previously used to encrypt the file.  After the file is decrypted, you'll be given an opportunity to save the decrypted file to your system.</p>

		<div class="divTable">
			<div class="divTableBody">
				<div class="divTableRow">
					<div class="divTableCell">Password</div>
					<div class="divTableCell"><input id=txtDecpassphrase type=password size=30 onkeyup=javascript:decvalidate(); value=''></div>
				</div>
			</div>
		</div>

		<p> </p>

		<div>
				<div class=dropzone  id="decdropzone" ondrop="drop_handler(event);" ondragover="dragover_handler(event);" ondragend="dragend_handler(event);">
					<p>Drag and drop file to be decrypted into this dropzone, or click <a role=button onclick=javascript:decfileElem.click();>here</a> to select file.</p>
					<p><span id=spndecfilename></span></p>
				</div>
				<input type="file" id="decfileElem" style="display:none" onchange="selectfile(this.files)">
		</div>

		<p> </p>

		<div class="divTable">
			<div class="divTableBody">
				<div class="divTableRow">
					<div class="divTableCell"><button id=btnDecrypt onclick=javascript:decryptfile(); disabled>Decrypt File</button></div>
					<div class="divTableCell"><span id=spnDecstatus></span></div>
				</div>
			</div>
		</div>

		<p> </p>

		<div>
			<a id=aDecsavefile hidden><button>Save Decrypted File</button></a>
		</div>
	
		<p> </p>
	</div>
</body>
<!-- Cypher Script -->
<script src="assets/js/rsa-oaep.js"></script>
<script src="assets/js/aes-cbc.js"></script>
<!-- End Cypher Script -->
<!-- HomePage JS -->
<script type="text/javascript">
switchdiv('encrypt');
function switchdiv(t) {
    if(t=='encrypt') {
        divEncryptfile.style.display='block';
        divDecryptfile.style.display='none';
        btnDivEncrypt.disabled=true;
        btnDivDecrypt.disabled=false;
        mode='encrypt';
    } else if(t=='decrypt') {
        divEncryptfile.style.display='none';
        divDecryptfile.style.display='block';
        btnDivEncrypt.disabled=false;
        btnDivDecrypt.disabled=true;
        mode='decrypt';
    }
}
</script>
<!-- End HomePage JS -->
</html>